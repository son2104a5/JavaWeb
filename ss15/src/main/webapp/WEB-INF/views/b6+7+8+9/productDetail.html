<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Chi ti·∫øt s·∫£n ph·∫©m</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

<div class="max-w-3xl mx-auto p-6">
    <div class="bg-white shadow-lg rounded-xl p-6">
        <h1 class="text-3xl font-bold text-blue-600 mb-2" th:text="${product.name}">T√™n s·∫£n ph·∫©m</h1>

        <p class="text-gray-700 mb-2 font-medium">M√¥ t·∫£:</p>
        <p class="text-gray-600 mb-4" th:text="${product.description ?: 'Kh√¥ng c√≥ m√¥ t·∫£'}">M√¥ t·∫£ s·∫£n ph·∫©m</p>

        <p class="text-lg font-semibold mb-4">
            Gi√°: <span th:text="${product.price}"></span> VND
        </p>

        <!-- Th√™m v√†o gi·ªè h√†ng -->
        <form th:action="@{/cart/add}" method="post" class="mb-6">
            <input type="hidden" name="productId" th:value="${product.id}" />
            <input type="hidden" name="userId" value="1"/>
            <div class="flex items-center space-x-3">
                <label class="text-sm">S·ªë l∆∞·ª£ng:</label>
                <input type="number" name="quantity" value="1" min="1" class="w-20 border px-2 py-1 rounded"/>
                <button type="submit"
                        class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 text-sm">
                    üõí Th√™m v√†o gi·ªè
                </button>
            </div>
        </form>

        <!-- ƒê√°nh gi√° -->
        <hr class="my-4">
        <h2 class="text-xl font-bold mb-2">‚≠ê ƒê√°nh gi√°</h2>
        <div th:if="${#lists.isEmpty(reviews)}" class="text-gray-500 italic mb-4">Ch∆∞a c√≥ ƒë√°nh gi√° n√†o.</div>
        <div th:each="r : ${reviews}" class="mb-3">
            <p class="text-yellow-500 font-medium">‚≠ê <span th:text="${r.rating}"></span></p>
            <p th:text="${r.comment}"></p>
        </div>

        <!-- G·ª≠i ƒë√°nh gi√° -->
        <h3 class="text-lg font-bold mt-6 mb-2">‚úçÔ∏è G·ª≠i ƒë√°nh gi√°</h3>
        <form th:action="@{/products/{id}/review(id=${product.id})}" method="post" class="space-y-3">
            <input type="hidden" name="userId" value="1"/>
            <div>
                <label class="block">S·ªë sao:</label>
                <input type="number" name="rating" min="1" max="5" required class="w-full border px-3 py-1 rounded"/>
            </div>
            <div>
                <label class="block">Nh·∫≠n x√©t:</label>
                <textarea name="comment" required class="w-full border px-3 py-2 rounded h-24 resize-none"></textarea>
            </div>
            <button type="submit"
                    class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600">
                G·ª≠i ƒë√°nh gi√°
            </button>
        </form>
    </div>
</div>

</body>
</html>
